<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta name="keywords" content="UIC, Computer, CS, CST, Computer Science, 计算机, 联合国际学院, 计算机科学, 计算机科学与技术 ">
    <meta name="description" content="UIC HCC 计算机俱乐部网站 ">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <title>UIC HCC 计算机俱乐部</title>
    <link rel="icon" href="img/favicon.ico">
    <!-- Bootstrap core CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font-awesome CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link rel="stylesheet" href="/blog/css/style.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
    <body>
        <!-- Navbar -->
        <nav class="nav-container navbar navbar-expand-md navbar-dark fixed-top marginNavBar" id="navBar">
    <div class="container">
        <div style="visibility: hidden">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse"
                aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
        <img class="navbar-icon mx-auto" src="/img/uichccwhite.svg" style="max-height: 40px;">
        <div>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse"
                aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
        <div class="collapse navbar-collapse nav-text-padding" id="navbarCollapse">
            <ul class="navbar-nav">
                
                    <li class="nav-item">
                        <a class="nav-link" href="/blog/../">Home</a>
                    </li>
                
                    <li class="nav-item">
                        <a class="nav-link" href="/blog/../blog">Blog</a>
                    </li>
                
                    <li class="nav-item">
                        <a class="nav-link" href="/blog/../projects">Projects</a>
                    </li>
                
                    <li class="nav-item">
                        <a class="nav-link" href="/blog/../groups">Groups</a>
                    </li>
                
                    <li class="nav-item">
                        <a class="nav-link" href="/blog/../about">About</a>
                    </li>
                
                    <li class="nav-item">
                        <a class="nav-link" href="/blog/../contacts">Contact Us</a>
                    </li>
                
            </ul>
        </div>
    </div>
</nav>
            <!-- Blog Header: title and subtitle -->
            <div id="myCarousel" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner">
        <div class="carousel-item active" style="background-image: url(https://i.loli.net/2018/01/12/5a5851e72c7c2.jpg);">
            <img class="first-slide" src="https://i.loli.net/2018/01/12/5a5851e72c7c2.jpg" alt="First slide">
            <div class="container">
                <div class="carousel-caption carousel-caption-bright d-none d-block text-left">
                    <h1>UIC HCC Computer Club · Blog</h1>
                    <p>
                        
                            Abridge you and technology, A bridge between you and technology.
                        
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
        <div class="container marketing">
            <div class="blog-post">
    <!-- Title -->
    <h2 class="blog-post-title">
        <a href="/blog/2016/12/07/UIC专属头像合成器 · 原理解析/">
            UIC专属头像合成器 · 原理解析
        </a>
    </h2>
    <!-- Date and Author -->
    <p class="blog-post-meta">
        2016-12-07
            
    </p>
    <!-- Content -->
    <p>这是一个网页，涉及到的语言是 HTML, CSS 和 JavaScript (JS)，使用到的 JS 框架是 jQuery。用到的主要 HTML 元素是 Canvas (画布)，主要的 JS 类是 FileReader。下面主要讲一下 JS 里面的功能代码。</p>
<p>原理是使用画布进行“ps”，获取上传的图片之后，给画布填充白色背景颜色，然后将图片按照指定比例缩小并画在画布上面，此时的图片内容缩小后的头像，最后将 logo 图片画在右上角，即可完成 UIC logo 专属头像的合成。</p>
<p>首先，新建一个画布。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var c = document.cresateElement(&apos;canvas&apos;);</span><br><span class="line">var ctx = c.getContext(&apos;2d&apos;);</span><br><span class="line">c.width = wid;</span><br><span class="line">c.height = wid; </span><br><span class="line">ctx.fillStyle = &apos;white&apos;; // 将画布的填充颜色设置为白色，之后填充背景颜色时会用到</span><br></pre></td></tr></table></figure>
<p>wid 是画布的默认宽度，也就是图片的宽度。然后我们将<br><img src="https://ooo.0o0.ooo/2017/06/17/5944fbb4bfe22.jpg" alt=""><br>（由于图片格式是 png，故底色呈现为黑色。）</p>
<p>这个图片的地址存下来，以遍之后使用。这里我们把他存在数组 <code>data1[]</code> 中，我们可以通过 <code>data1[0]</code> 来获取这个图片的地址，数据格式是 <code>string</code>。</p>
<p>另外，我们需要<code>&lt;input type=&quot;file&quot; accept=&quot;image/*&quot; id=&quot;uic&quot;&gt;</code>标签实现本地文件上传功能。对应的 JS 代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$(&quot;#uic&quot;).change(function() &#123;</span><br><span class="line"> // 点击上传图片被调用，也就是点击上传图片之后这里面的代码会被运行</span><br><span class="line"> ctx.fill(); // 填充背景颜色，颜色是白色</span><br><span class="line"> var furl = $(&quot;#uic&quot;)[0].files[0]; // 获取上传的图片的 URL</span><br><span class="line"> var file = new FileReader(); </span><br><span class="line">  file.readAsDataURL(furl); // 开始读取图片文件对象的内容</span><br><span class="line"> file.onload = function(e)&#123; // 上传的图片加载成功后被调用</span><br><span class="line">   var img = new Image(); </span><br><span class="line">   img.src = e.target.result; // 将上传的图片的地址赋值给 img 对象</span><br><span class="line">    img.onload = function () &#123;</span><br><span class="line">      ctx.drawImage(this, 78, 120, wid - 200, wid - 190); </span><br><span class="line">      // 将自己上传的图片缩小并画到画布上，也就是小头像，</span><br><span class="line">      //78是小头像的左边距，120是上边距，(wid - 200)是小图片的宽度，</span><br><span class="line">      //(wid - 190)是小图片的高度，单位是 pixel 即像素。</span><br><span class="line">      var img = new Image();</span><br><span class="line">      img.src = data1[0]; // 将 UIC logo 图片的地址并赋值</span><br><span class="line">      ctx.drawImage(img, 0, 0, wid, wid); // 将 UIC logo 画到画布上</span><br><span class="line">     $(&apos;#imgBox&apos;).attr(&apos;src&apos;, c.toDataURL(&quot;image/jpeg&quot;)); </span><br><span class="line">     // imgBox 是&lt;img&gt;图片标签的 id，</span><br><span class="line">     //我们将画布的内容转换成 jpeg </span><br><span class="line">     格式的图片并将其显示到 id 为 imgBox 的&lt;img&gt;标签中。</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>问：你的源代码我可以看到吗？<br>可以。 </p>
<p><img src="https://ooo.0o0.ooo/2017/06/17/5944fbb4bea9c.jpg" alt=""></p>
<p>如图，点击“复制链接”，然后将链接发送到微信的电脑端，使用迅雷或其他下载工具新建任务，地址就是这个复制好的链接。下载到后是一个 HTML 文件，可以选择用记事本等工具打开。如果没有下载工具，将地址输入到浏览器。进入到网页后，</p>
<p>点击“检查元素”，即可查看到源代码。</p>

</div>
            <!-- Footer -->
            <hr class="featurette-divider">
            <footer id="footer">
    <div class="float-lg-right">
        <span>Hosting on</span>
        <a href="https://github.io/" style="display: inline">
            <img src="/blog/img/githubpages.svg" height="21px">
        </a>
    </div>
    <p>&copy; 2017-2018 UIC HCC Computer Club
    </p>
</footer>
            <!-- After footer scripts -->
        </div>
        <!-- Bootstrap core JavaScript
    ================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.min.js"></script>
<!-- Popper rely for Bootstrap -->
<script src="/blog/js/popper.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="/blog/js/ie10-viewport-bug-workaround.js"></script>
    </body>
</html>